@import "tailwindcss";
@import "./docs/_components/prose.css";

@view-transition {
	navigation: auto;
}

@theme {
	--color-bg: #0c0c0c;
	--color-fg: #fafafa;
	--color-muted: #737373;
	--color-dim: #404040;
	--color-line: #1c1c1c;
	--color-surface: #141414;
	--color-accent: #ef4444;

	--font-mono: var(--font-mono), ui-monospace, monospace;
	--font-serif: var(--font-serif), Georgia, serif;
}

@layer base {
	* {
		box-sizing: border-box;
		padding: 0;
		margin: 0;
	}
	*:focus:not(:focus-visible) {
		outline: none;
	}
	*:focus-visible {
		outline: 1px solid var(--color-muted);
		outline-offset: 2px;
	}
	html {
		scroll-behavior: smooth;
		color-scheme: dark;
	}
	html,
	body {
		height: 100%;
	}
	a {
		color: inherit;
		text-decoration: none;
	}

	body {
		color: var(--color-fg);
		background: var(--color-bg);
		font-family: var(--font-mono);
		-webkit-font-smoothing: antialiased;
		font-variant-numeric: tabular-nums;
		font-size: 13px;
		line-height: 1.7;
	}

	::selection {
		background: var(--color-fg);
		color: var(--color-bg);
	}

	::-webkit-scrollbar {
		width: 8px;
		height: 8px;
	}

	::-webkit-scrollbar-track {
		background: transparent;
	}

	::-webkit-scrollbar-thumb {
		background: var(--color-dim);
		border-radius: 4px;
	}

	::-webkit-scrollbar-thumb:hover {
		background: var(--color-muted);
	}

	* {
		scrollbar-width: thin;
		scrollbar-color: var(--color-dim) transparent;
	}
}

@layer components {
	.shiki,
	.shiki span {
		color: var(--shiki-dark) !important;
		background-color: transparent !important;
	}

	.shiki .line.diff.add {
		background: rgba(46, 160, 67, 0.15);
	}

	.shiki .line.diff.add::before {
		content: "+";
		position: absolute;
		left: 0.5rem;
		color: #3fb950;
		user-select: none;
	}

	.shiki .line.diff.remove {
		background: rgba(248, 81, 73, 0.15);
		opacity: 0.7;
	}

	.shiki .line.diff.remove::before {
		content: "-";
		position: absolute;
		left: 0.5rem;
		color: #f85149;
		user-select: none;
	}

	.shiki .line.diff {
		position: relative;
		padding-left: 1.5rem;
	}

	.shiki .line.highlighted {
		background: rgba(255, 255, 255, 0.06);
	}

	.shiki.has-focused .line:not(.focused) {
		opacity: 0.4;
		transition: opacity 0.2s;
	}

	.shiki.has-focused:hover .line:not(.focused) {
		opacity: 0.8;
	}

	.shiki .line.focused {
		background: rgba(255, 255, 255, 0.06);
	}

	.shiki .highlighted-word {
		background: rgba(255, 255, 255, 0.12);
		border-radius: 3px;
		padding: 1px 4px;
		margin: -1px -4px;
	}
}

@layer utilities {
	.font-serif {
		font-family: var(--font-serif);
	}

	.shimmer {
		background: linear-gradient(
			90deg,
			var(--color-dim) 0%,
			var(--color-muted) 50%,
			var(--color-dim) 100%
		);
		background-size: 200% 100%;
		background-clip: text;
		-webkit-background-clip: text;
		-webkit-text-fill-color: transparent;
		animation: shimmer 2s infinite;
	}

	@keyframes shimmer {
		0% {
			background-position: 100% 0;
		}
		100% {
			background-position: -100% 0;
		}
	}

	.animate-slidein {
		animation: slidein 250ms ease;
	}

	.animate-slideout {
		animation: slideout 200ms ease forwards;
	}

	.animate-fadein {
		animation: fadein 400ms ease;
	}

	.animate-fadeout {
		animation: fadeout 200ms ease forwards;
	}

	.animate-slideup {
		animation: slideup 500ms ease;
	}

	@keyframes slidein {
		from {
			transform: translateX(100%);
		}
		to {
			transform: translateX(0);
		}
	}

	@keyframes slideout {
		from {
			transform: translateX(0);
		}
		to {
			transform: translateX(100%);
		}
	}

	@keyframes fadein {
		from {
			opacity: 0;
		}
		to {
			opacity: 1;
		}
	}

	@keyframes fadeout {
		from {
			opacity: 1;
		}
		to {
			opacity: 0;
		}
	}

	@keyframes slideup {
		from {
			opacity: 0;
			transform: translateY(20px);
		}
		to {
			opacity: 1;
			transform: translateY(0);
		}
	}
}

@media (prefers-contrast: more) {
	:root {
		--color-muted: #a3a3a3;
		--color-dim: #525252;
		--color-line: #333333;
	}
}

@media (prefers-reduced-motion: reduce) {
	*,
	*::before,
	*::after {
		animation-duration: 0.01ms !important;
		animation-iteration-count: 1 !important;
		transition-duration: 0.01ms !important;
		scroll-behavior: auto !important;
	}
}
